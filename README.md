# BankManagementSystem

ASP.NET Core Web API for managing branches, bank accounts, users (customers/employees/managers), and access/permission mappings via RESTful CRUD endpoints.

## ğŸ“Œ Overview
**BankManagementSystem** is a C# ASP.NET Core Web API project built around a simple banking domain model.
It provides standard CRUD operations for core entities and dedicated endpoints for many-to-many relationships such as customerâ†”account access, employeeâ†”branch assignments, and employeeâ†”account permissions.

The project demonstrates EF Core + SQL Server persistence, filtering/paging/sorting via **POST /get** endpoints, and role-based authorization for `Manager`, `Employee`, and `Customer`.

---

## âœ¨ Features
- JWT token-based authentication (/api/auth/login / /api/auth/token)
- Role-based authorization: Manager, Employee, Customer
- CRUD endpoints for:
   * Branches (Manager only)
   * Accounts (Employee/Manager; Employee access depends on permissions)
   * Customers (Customer can access only their own data; management by Employee/Manager)
   * Employees (Employee can access only their own data; management by Manager)
   * Managers (Manager only)
- Junction resources (composite keys):
   * CustomerAccounts (customer access to account + Role: PRIMARY/JOINT)
   * EmployeeBranches (employee assignment to branch + Position)
   * ManagerBranches (manager assignment to branch)
   * EmployeeAccountPermissions (employee permissions for account: READ/WRITE)
- Search endpoints with filtering + paging + sorting:
   * POST /api/<resource>/get
- Input validation with FluentValidation (e.g., IBAN format, allowed enum values, dates not in the future)
- Seeded System Administrator (Manager) account in the database

---

## ğŸ› ï¸ Technologies Used
- C#
- ASP.NET Core Web API
- Entity Framework Core
- SQL Server
- FluentValidation
- JWT Authentication (token generated by `TokenService`)

## â–¶ï¸ How to Run
1. Clone or download the repository
2. Open the solution in Visual Studio or use the .NET CLI
3. Update the SQL Server connection string in:
   * `Common.Persistence/BankDbContext.cs â†’ OnConfiguring()`
4. Apply migrations to create the database:
   ```
   dotnet tool install --global dotnet-ef
   dotnet ef database update
   ```
5. Run the API:
   ```
   dotnet run
   ```
6. Authenticate via:
- `POST /api/auth/login` (or `/api/auth/token`)
    * and use the returned `Bearer <token>` for authorized endpoints.
 
---

## ğŸ” Authentication & Access Rules (high level)
- Manager
  * Full access to all resources (including role changes and permissions management)
- Employee
  * Can manage accounts, but account access is restricted:
  * `GET` requires `READ` or `WRITE` permission for that account
  * `PUT` / `DELETE` require `WRITE` permission
  * Can view only their own employee profile
- Customer
  * Can view only their own customer profile
  * Can view only their own `CustomerAccounts` mappings
- Default seeded Manager credentials (DB seed):
  * Email: `stivanp3@gmail.com`
  * Password: `admin123`

---

## ğŸ“ Project Structure
```
BankManagementSystem/
â”œâ”€â”€ API/
â”‚   â”œâ”€â”€ Controllers/
â”‚   â””â”€â”€ DTOs/
â”‚       â”œâ”€â”€ RequestDTOs/
â”‚       â””â”€â”€ ResponseDTOs/
â”‚   â”œâ”€â”€ Services/
â”œâ”€â”€ Common/
â”‚   â”œâ”€â”€ Entities/
â”‚   â”œâ”€â”€ Persistence/
â”‚   â”œâ”€â”€ Services/
â”‚   â””â”€â”€ Migrations/
â””â”€â”€ README.md
```
## â„¹ï¸ Notes
- Passwords are stored/checked as plain text (demo/educational implementation).
- The SQL Server connection string is currently configured directly in `BankDbContext.OnConfiguring()`.
- `POST /api/<resource>/get` supports:
  * `Pager` (`Page`, `PageSize`)
  * `OrderBy` (property name)
  * `SortAsc` (true/false)
  * Resource-specific `Filter`

---

## ğŸ‘¤ Author
Developed by **Stivan Pashaliev**
